<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/home.css" />
	</head>

	<body>
		<!--下拉刷新容器-->
		<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<!--数据列表-->
				<nav class="home-top-btn">
					<a id="ranking" class="home-top-btn-item" href="#">
						<span class=" iconfont icon-paixing home-icon"></span>
						<span class="home-top-btn-label">排行</span>
					</a>
					<a id="assortment" class="home-top-btn-item" href="#">
						<span class="home-icon iconfont icon-leimupinleifenleileibie1"></span>
						<span class="home-top-btn-label">分类</span>
					</a>
					<a id="searching" class="home-top-btn-item" href="#">
						<span class="home-icon iconfont icon-sousuo"></span>
						<span class="home-top-btn-label">搜索</span>
					</a>
				</nav>

				<!--轮播图-->
				<div id="slider" class="mui-slider" style="margin-top: 16px;">
					<div class="mui-slider-group mui-slider-loop">
						<!-- 额外增加的一个节点(循环轮播：第一个节点是最后一张轮播) -->
						<!--4-->
						<div class="mui-slider-item mui-slider-item-duplicate">
							<a href="# " class="home-card ">
								<div class="home-card-left ">
									<span>最急</span>
									<img src="images/kuaidiicon.png" />
									<p>学习</p>
								</div>
								<div class="home-card-right ">
									<h5>日新楼帮忙去快日新楼帮忙去快日新楼帮忙去快</h5>
									<p class="deadline"><span>截止 </span><span>2018.01.01</span></p>
									<p><span class="reward">¥8.00</span><span class="participants">3人</span></p>
								</div>
							</a>
						</div>
						<!--1-->
						<div class="mui-slider-item">
							<a href="# " class="home-card ">
								<div class="home-card-left ">
									<span>最急</span>
									<img src="images/kuaidiicon.png" />
									<p>学习</p>
								</div>
								<div class="home-card-right ">
									<h5>日新楼帮忙1111</h5>
									<p class="deadline"><span>截止 </span><span>2018.01.01</span></p>
									<p><span class="reward">¥8.00</span><span class="participants">3人</span></p>
								</div>
							</a>
						</div>
						<!--2-->
						<div class="mui-slider-item">
							<a href="# " class="home-card ">
								<div class="home-card-left ">
									<span>最急</span>
									<img src="images/kuaidiicon.png" />
									<p>学习</p>
								</div>
								<div class="home-card-right ">
									<h5>日新楼帮忙2222</h5>
									<p class="deadline"><span>截止 </span><span>2018.01.01</span></p>
									<p><span class="reward">¥8.00</span><span class="participants">3人</span></p>
								</div>
							</a>
						</div>
						<!--3-->
						<div class="mui-slider-item">
							<a href="# " class="home-card ">
								<div class="home-card-left ">
									<span>最急</span>
									<img src="images/kuaidiicon.png" />
									<p>学习</p>
								</div>
								<div class="home-card-right ">
									<h5>日新楼帮忙3333</h5>
									<p class="deadline"><span>截止 </span><span>2018.01.01</span></p>
									<p><span class="reward">¥8.00</span><span class="participants">3人</span></p>
								</div>
							</a>
						</div>
						<!--4-->
						<div class="mui-slider-item">
							<a href="# " class="home-card ">
								<div class="home-card-left ">
									<span>最急</span>
									<img src="images/kuaidiicon.png" />
									<p>学习</p>
								</div>
								<div class="home-card-right ">
									<h5>日新楼帮忙去快日新楼帮忙去快日新楼帮忙去快</h5>
									<p class="deadline"><span>截止 </span><span>2018.01.01</span></p>
									<p><span class="reward">¥8.00</span><span class="participants">3人</span></p>
								</div>
							</a>
						</div>
						<!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
						<!--1-->
						<div class="mui-slider-item mui-slider-item-duplicate">
							<a href="# " class="home-card ">
								<div class="home-card-left ">
									<span>最急</span>
									<img src="images/kuaidiicon.png" />
									<p>学习</p>
								</div>
								<div class="home-card-right ">
									<h5>日新楼帮忙1111</h5>
									<p class="deadline"><span>截止 </span><span>2018.01.01</span></p>
									<p><span class="reward">¥8.00</span><span class="participants">3人</span></p>
								</div>
							</a>
						</div>
					</div>
					<div class="mui-slider-indicator">
						<div class=" mui-indicator mui-active "></div>
						<div class="mui-indicator "></div>
						<div class="mui-indicator "></div>
						<div class="mui-indicator "></div>
					</div>

				</div>
				<!---->
				<div style="height:auto;width: 100%;padding: 8px; padding-left: 16px;position: relative;">
					<div style="display:block;background: #1296DB;height: 20px;width: 4px;
						float: left;"></div>
					<span style="margin-left: 5px;font-size: 14px;color: black;font-weight: bold;">最急任务</span>
					<a href="#about" class="mui-navigate-right">
						<i class="mui-pull-right" style="
						font-style: normal;
						color: #999999;
						margin-right: 30px;
						font-size: 14px
						">更多</i>
					</a>
				</div>
				<a href="# " class="home-card ">
					<div class="home-card-left ">
						<span>最急</span>
						<img src="images/kuaidiicon.png" />
						<p>学习</p>
					</div>
					<div class="home-card-right ">
						<h5>日新楼帮忙去快日新楼帮忙去快日新楼帮忙去快</h5>
						<p class="deadline"><span>截止 </span><span>2018.01.01</span></p>
						<p><span class="reward">¥8.00</span><span class="participants">3人</span></p>
					</div>
				</a>
				<a href="# " class="home-card ">
					<div class="home-card-left ">
						<span>最急</span>
						<img src="images/kuaidiicon.png" />
						<p>学习</p>
					</div>
					<div class="home-card-right ">
						<h5>日新楼帮忙去快递日</h5>
						<p class="deadline"><span>截止 </span><span>2018.01.01</span></p>
						<p><span class="reward">¥8.00</span><span class="participants">3人</span></p>
					</div>
				</a>
				<!--最新任务-->
				<div style="height:auto;width: 100%;padding: 8px; padding-left: 16px;position: relative;">
					<div style="display:block;background: #1296DB;height: 20px;width: 4px;
						float: left;"></div>
					<span style="margin-left: 5px;font-size: 14px;color: black;font-weight: bold;">最新任务</span>
					<a href="#about" class="mui-navigate-right">
						<i class="mui-pull-right" style="
						font-style: normal;
						color: #999999;
						margin-right: 30px;
						font-size: 14px;
						">更多</i>
					</a>
				</div>
				<a href="# " class="home-card ">
					<div class="home-card-left ">
						<span>最急</span>
						<img src="images/kuaidiicon.png" />
						<p>学习</p>
					</div>
					<div class="home-card-right ">
						<h5>日新楼帮忙</h5>
						<p class="deadline"><span>截止 </span><span >2018.01.01</span></p>
						<p ><span class="reward">¥8.00</span><span class="participants">3人</span></p>
					</div>
				</a>
				<ul class="mui-table-view mui-table-view-chevron " style="background:transparent;">
					<!--<li class="mui-table-view-cell " style="padding-right: 41px;">-->
					<li class="home-table-view-cell ">

					</li>
				</ul>
			</div>
		</div>
		<script src="js/mui.min.js "></script>
		<script type="text/javascript">
			var slider = mui("#slider ");
			slider.slider({
				interval: 5000
			});
			mui.init({
				pullRefresh: {
					container: '#pullrefresh',
					down: {
						style: 'circle',
						callback: pulldownRefresh
					},
					up: {
						auto: true,
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				},
				//				preloadPages: [{
				//						id: 'detail.html',
				//						url: 'index-subpage-home-detail.html'
				//					},
				//					{
				//						id: 'assortment.html',
				//						url: 'index-subpage-home-assortment.html'
				//					},
				//					{
				//						id: 'searching.html',
				//						url: 'index-subpage-home-searching.html'
				//					},
				//					{
				//						id: 'ranking.html',
				//						url: 'index-subpage-home-ranking.html'
				//					}
				//
				//				]
			});

			var count = 0;

			//上拉刷新
			function pullupRefresh() {
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullupToRefresh((++count > 10)); //参数为true代表没有更多数据了。
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.home-table-view-cell');
					var newCount = cells.length > 0 ? 5 : 20; //首次加载20条，满屏
					for(var i = cells.length, len = i + newCount; i < len; i++) {
						var li = document.createElement('li');
						li.className = 'home-table-view-cell';
						//						li.innerHTML = '<a class="mui-navigate-right ">Item ' + (i + 1) + '</a>';
//						li.innerHTML = '<a href="# " class="home-card ">' +
//							'<div class="home-card-left ">' +
//							'<span>最新</span>' +
//							'<img src="images/xuexi.png " />' +
//							'<p>学习</p>' +
//							'</div>' +
//							'<div class="home-card-right ">' +
//							'<span>日新楼帮忙去快递</span>' +
//							'<p><span>截止时间:</span><span>' + new Date() + '</span></p>' +
//							'<p><span>赏金:</span><span>' + Math.ceil(10 * Math.random()) + ' ¥</span></p>' +
//							'<p><span>正在竞标：</span><span>' + Math.ceil(10 * Math.random()) + '人</span></p>' +
//							'</div>' +
//							'</a>';
						li.innerHTML =
							'<a href="#" class="home-card ">'+
							'<div class="home-card-left ">'+
							'<span>最急</span>'+
							'<img src="images/kuaidiicon.png" />'+
							'<p>学习</p>'+
							'</div>'+
							'<div class="home-card-right ">'+
							'<h5>帮帮单'+Math.ceil(10 * Math.random())+'</h5>'+
							'<p class="deadline"><span>截止 </span><span >'+ new Date()+'</span></p>'+
							'<p ><span class="reward">¥8.00</span><span class="participants">'+Math.ceil(10 * Math.random())+'人</span></p>'+
							'</div>'+
							'</a>';
							
						var a = li.getElementsByTagName('a')[0];
						var span = (a.children[0]).getElementsByTagName('span')[0];
						var img = (a.children[0]).getElementsByTagName('img')[0];
						var p = (a.children[0]).getElementsByTagName('p')[0];
						//更新数据
						a.src = 'index-subpage-wode.html';
						span = '最新';
						var imgs = ['images/xuexi.png', 'images/xuexiicon.png', 'images/xunwuicon.png', 'images/kuaidiicon.png', 'images/jietiicon.png']
						img.src = imgs[parseInt(Math.random() * 5)];

						table.appendChild(li);
					}
				}, 1500);
			}

			function addData() {
				var table = document.body.querySelector('.mui-table-view');
				var cells = document.body.querySelectorAll('.home-table-view-cell');
				for(var i = cells.length, len = i + 5; i < len; i++) {
					var li = document.createElement('li');
					li.className = 'home-table-view-cell';
					li.innerHTML = '<a href="# " class="home-card ">' +
						'<div class="home-card-left ">' +
						'<span>热门</span>' +
						'<img src="images/xuexi.png " />' +
						'<p>学习</p>' +
						'</div>' +
						'<div class="home-card-right ">' +
						'<span>日新楼帮忙去快递</span>' +
						'<p><span>截止时间:</span><span>' + +'</span></p>' +
						'<p><span>赏金:</span><span>' + +'</span></p>' +
						'<p><span>正在竞标：</span><span>' + +'人</span></p>' +
						'</div>' +
						'</a>';
					//	
					var a = li.getElementsByTagName('a')[0];
					var span = (a.children[0]).getElementsByTagName('span')[0];
					var img = (a.children[0]).getElementsByTagName('img')[0];
					var p = (a.children[0]).getElementsByTagName('p')[0];
					//更新数据
					a.src = 'index-subpage-wode.html';
					span = '最新';
					var imgs = ['images/xuexi.png', 'images/xuexiicon.png', 'images/xunwuicon.png', 'images/kuaidiicon.png', 'images/jietiicon.png']
					img.src = imgs[parseInt(Math.random() * 5)];

					//下拉刷新，新纪录插到最前面；
					table.insertBefore(li, table.firstChild);
				}
			}
			/**
			 * 下拉刷新具体业务实现
			 */
			function pulldownRefresh() {
				setTimeout(function() {
					addData();
					mui('#pullrefresh').pullRefresh().endPulldownToRefresh();
					mui.toast("为你更新了5个最新任务 ");
				}, 1500);
			}

			/**
			 * 点击进入新窗口
			 */
			mui.plusReady(function() {

				var detailPage = null;
				//添加列表项的点击事件
				mui('.mui-content').on('tap', '.home-card', function(e) {
					var id = this.getAttribute('id');
					//获得详情页面
					if(!detailPage) {
						detailPage = plus.webview.getWebviewById('index-subpage-home-detail.html');
					}
					//触发详情页面的newsId事件
					mui.fire(detailPage, 'newsId', {
						id: id
					});
					//打开详情页面          
					mui.openWindow({
						id: 'detail.html',
						url: 'index-subpage-home-detail.html'
					});

				});

				var ranking_btn = document.getElementById("ranking");
				var assortment_btn = document.getElementById("assortment");
				var searching_btn = document.getElementById("searching");
				//监听点击事件
				ranking_btn.addEventListener("tap", function() {
					console.log('ranking')
					mui.openWindow({
						id: 'detail.html',
						url: 'index-subpage-home-ranking.html'
					});
				});

				assortment_btn.addEventListener("tap", function() {

					mui.openWindow({
						id: 'detail.html',
						url: 'index-subpage-home-assortment.html'
					});
				});

				searching_btn.addEventListener("tap", function() {

					mui.openWindow({
						id: 'detail.html',
						url: 'index-subpage-home-searching.html'
					});
				});

			})
		</script>
	</body>

</html>