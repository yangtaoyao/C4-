<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/iconfont.css" />
		<link rel="stylesheet" href="css/middleBtnPage.css" />
		<style>
			body {
				background: #FFFFFF;
			}
		</style>
	</head>

	<body>
		<ul id="vm_time" class="mui-table-view" style="background: none;vm:16px">
			<li class="mui-table-view-cell mui-media" style="height: auto;">
				<a href="">
					<div class="mui-media-body">
						<h3 style="font-size: 50px;font-weight: 100;color: #666666;">
							{{time.myhour}}{{time.myminute}}
							
						</h3>
						<p class='mui-ellipsis' style="font-size: 14px;color: #999999;">
							{{time.myyear}}{{time.mymonth}}{{time.mydate}} {{time.myday}}
						</p>
						<h5 class='mui-ellipsis' style="color: #996666;font-size: 16px;">
							{{weather.weather}} {{weather.temperature}} {{weather.wind}}
						</h5>
					</div>
				</a>
			</li>

		</ul>
		<div class="bar-btn" style="bottom: 100px; background: none;box-shadow: none;bottom: 150px;">
			<button class="mui-tab-item btn-item">
				<div>
					<div class="icon" style="background: #f4d03e;">
						<span class="mui-icon iconfont icon-renwu11">
						</span>
					</div>
					<span class="label">任务</span>
				</div>
			</button>
			<button class="mui-btn btn-item">
				<div>
					<div class="icon" style="background: #4fcc44;">
						<span class="mui-icon iconfont icon-dongtai">
						</span>
					</div>
					<span class="label">动态</span>
				</div>
			</button>
			<button class="mui-tab-item btn-item">
				<div>
					<div class="icon" style="background: #e88007;">
						<span class="mui-icon iconfont icon-biaobai">
						</span>
					</div>
					<span class="label">表白</span>
				</div>
			</button>
			<button class="mui-tab-item btn-item">
				<div>
					<div class="icon" style="background: #199ED8;">
						<span class="mui-icon iconfont icon-fabuxunwu">
						</span>
					</div>
					<span class="label">寻物</span>
				</div>
			</button>

		</div>
		<div class="bar-btn" style="bottom: 100px; background: none;box-shadow: none;bottom: 40px;">
			<button class="mui-btn btn-item">
				<div>
					<div class="icon" style="background: #f4d03e;">
						<span class="mui-icon iconfont icon-qiandao2">
						</span>
					</div>
					<span class="label">签到</span>
				</div>
				
			</button>

		</div>
		<nav class="mui-bar mui-bar-tab back">
			<a class="mui-tab-item mui-action-back" href="" style="height: 45px;">
				<span class="mui-icon  iconfont icon-iconfontclose " style="color: #999999; font-size: 26px; text-align: center;"></span>
			</a>
		</nav>
		<script src="js/mui.min.js"></script>
		<script src="js/vue.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			mui.init({});
			mui.plusReady(function() {

				mui("body").on("tap", ".btn-item", function() {
					
					var self=plus.webview.currentWebview();
					plus.webview.hide(self,"fade-out", 400);
					
					var thisNode = this.children[0];
					var thisSpan = thisNode.children[1];
					switch(thisSpan.innerText) {
						case "任务":
							mui.openWindow({
								id: 'index-subpage-tianjian',
								url: 'index-subpage-tianjia.html',
								show: {
									autoShow: true, //页面loaded事件发生后自动显示，默认为true
									aniShow: "slide-in-right", //页面显示动画，默认为”slide-in-right“；
									duration: 400,
								},
								waiting: {
									autoShow: true, //自动显示等待框，默认为true
									title: '加载中...', //等待对话框上显示的提示内容
									options: {
										width: "100px",
										height: "100px",
										color: "#ffffff",
										background: "rgba(0,0,0,0.4)",
										loading: {
											display: "block",
											height: "30px",
											icon: "images/logo.png"
										}
									}
								}
							});
							break;
						case "动态":
							mui.openWindow({
								id: 'index-subpage-tianjia-dongtai',
								url: 'index-subpage-tianjia-dongtai.html',
								show: {
									autoShow: true, //页面loaded事件发生后自动显示，默认为true
									aniShow: "slide-in-right", //页面显示动画，默认为”slide-in-right“；
									duration: 400,
								},
								waiting: {
									autoShow: true, //自动显示等待框，默认为true
									title: '加载中...', //等待对话框上显示的提示内容
									options: {
										width: "100px",
										height: "100px",
										color: "#ffffff",
										background: "rgba(0,0,0,0.4)",
										loading: {
											display: "block",
											height: "30px",
											icon: "images/logo.png"
										}
									}
								}
							});
							break;
						case "表白":
							mui.openWindow({
								id: 'index-subpage-tianjia-biaobai',
								url: 'index-subpage-tianjia-biaobai.html',
								show: {
									autoShow: true, //页面loaded事件发生后自动显示，默认为true
									aniShow: "slide-in-right", //页面显示动画，默认为”slide-in-right“；
									duration: 400,
								},
								waiting: {
									autoShow: true, //自动显示等待框，默认为true
									title: '加载中...', //等待对话框上显示的提示内容
									options: {
										width: "100px",
										height: "100px",
										color: "#ffffff",
										background: "rgba(0,0,0,0.4)",
										loading: {
											display: "block",
											height: "30px",
											icon: "images/logo.png"
										}
									}
								}
							});
							break;
						case "寻物":
							mui.openWindow({
								id: 'index-subpage-tianjia-xunwu',
								url: 'index-subpage-tianjia-xunwu.html',
								show: {
									autoShow: true, //页面loaded事件发生后自动显示，默认为true
									aniShow: "slide-in-right", //页面显示动画，默认为”slide-in-right“；
									duration: 400,
								},
								waiting: {
									autoShow: true, //自动显示等待框，默认为true
									title: '加载中...', //等待对话框上显示的提示内容
									options: {
										width: "100px",
										height: "100px",
										color: "#ffffff",
										background: "rgba(0,0,0,0.4)",
										loading: {
											display: "block",
											height: "30px",
											icon: "images/logo.png"
										}
									}
								}
							});
							break;
						case "签到":
							//							mui.openWindow({
							//								id: 'index-subpage-tianjia-dongtai',
							//								url: 'index-subpage-tianjia-dongtai.html',
							//								show: {
							//									autoShow: true, //页面loaded事件发生后自动显示，默认为true
							//									aniShow: "fade-in", //页面显示动画，默认为”slide-in-right“；
							//									duration: 400,
							//								},
							//								waiting: {
							//									autoShow: true, //自动显示等待框，默认为true
							//									title: '加载中...', //等待对话框上显示的提示内容
							//									options: {
							//										width: "100px",
							//										height: "100px",
							//										color: "#ffffff",
							//										background: "rgba(0,0,0,0.4)",
							//										loading: {
							//											display: "block",
							//											height: "30px",
							//											icon: "images/logo.png"
							//										}
							//									}
							//								}
							//							});
							break;
					}
					
					
				});

			});

			var vm = new Vue({
				el: '#vm_time',
				data: {
					time: {},
					weather: {},
				},

			})
			var date = "";
			document.addEventListener('get_time', function(event) {
				vm.time = {
					mydate: event.detail.mydate,
					mymonth: event.detail.mymonth,
					myday: event.detail.myday,
					myyear: event.detail.myyear,
					myhour: event.detail.myhour,
					myminute: event.detail.myminute,
				};
				if(date != event.detail.mydate) {
					mui.getJSON("http://v.juhe.cn/weather/index", {
						format: 1,
						cityname: "长春",
						key: "4f0a915a1de0a93a97b8e0d568165ca4",
					}, function(data) {
						if(data.resultcode == "200") {
							vm.weather = {
								temperature: data.result.today.temperature,
								weather: data.result.today.weather,
								wind: data.result.today.wind
							}
						}
						console.log(JSON.stringify(vm.weather))
					});
					date = event.detail.mydate;
				}
				console.log(JSON.stringify(vm.time));
			});
		</script>
	</body>

</html>